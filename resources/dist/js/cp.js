(()=>{"use strict";var e={881:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(645),n=r.n(i)()((function(e){return e[1]}));n.push([e.id,".save-and-continue-options input{margin-bottom:9px;margin-right:5px}",""]);const s=n},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(n[a]=!0)}for(var o=0;o<e.length;o++){var c=[].concat(e[o]);i&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},379:(e,t,r)=>{var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},s=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function o(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function c(e,t){for(var r={},i=[],n=0;n<e.length;n++){var s=e[n],c=t.base?s[0]+t.base:s[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=o(u),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(a[d].references++,a[d].updater(f)):a.push({identifier:u,updater:m(f,t),references:1}),i.push(u)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=r.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=s(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,r,i){var n=r?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var s=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function h(e,t,r){var i=r.css,n=r.media,s=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,v=0;function m(e,t){var r,i,n;if(t.singleton){var s=v++;r=p||(p=l(t)),i=f.bind(null,r,s,!1),n=f.bind(null,r,s,!0)}else r=l(t),i=h.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var r=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<r.length;i++){var n=o(r[i]);a[n].references--}for(var s=c(e,t),l=0;l<r.length;l++){var u=o(r[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}r=s}}}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{const e={props:{showOptions:{type:Boolean,default:!0},buttonClass:{default:"btn-primary"},preferencesPrefix:{type:String,required:!0}},data:function(){return{currentOption:null}},computed:{options:function(){return{options:{listing:__("Go To Listing"),continue_editing:__("Continue Editing"),create_another:__("Create Another")}}},buttonIcon:function(){switch(!0){case"listing"===this.currentOption:return{name:"micro/arrow-go-back",class:"w-3"};case"continue_editing"===this.currentOption:return{name:"micro/chevron-down-xs",class:"w-2"};case"create_another"===this.currentOption:return{name:"micro/add-circle",class:"w-3"}}},preferencesKey:function(){return"".concat(this.preferencesPrefix,".after_save")}},mounted:function(){var e=this;this.setInitialValue(),this.$watch("currentOption",(function(t){return e.setPreference(t)}))},methods:{setInitialValue:function(){this.currentOption=this.$preferences.get(this.preferencesKey)||"listing"},setPreference:function(e){e!==this.$preferences.get(this.preferencesKey)&&("listing"===e?this.$preferences.remove(this.preferencesKey):this.$preferences.set(this.preferencesKey,e))}}};var t=r(379),i=r.n(t),n=r(881),s={insert:"head",singleton:!1};i()(n.Z,s);n.Z.locals;function a(e,t,r,i,n,s,a,o){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),i&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):n&&(c=o?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}var o=a(e,(function(){var e=this,t=e._self._c;return t("div",{class:{"btn-group":e.showOptions}},[e._t("default"),e._v(" "),t("dropdown-list",{staticClass:"text-left",scopedSlots:e._u([{key:"trigger",fn:function(){return[t("button",{staticClass:"rounded-l-none",class:e.buttonClass},[e.buttonIcon?t("svg-icon",{class:e.buttonIcon.class,attrs:{name:e.buttonIcon.name}}):e._e()],1)]},proxy:!0}])},[e._v(" "),t("h6",{staticClass:"p-2",domProps:{textContent:e._s(e.__("After Saving"))}}),e._v(" "),t("div",{staticClass:"publish-fields px-2"},[t("div",{staticClass:"publish-field save-and-continue-options"},[t("radio-fieldtype",{attrs:{handle:"save_and_continue_options",config:e.options},model:{value:e.currentOption,callback:function(t){e.currentOption=t},expression:"currentOption"}})],1)])])],2)}),[],!1,null,null,null);var c=a({components:{SaveButtonOptions:o.exports},mixins:[{data:function(){return{preferencesPrefix:null}},computed:{hasPreferences:function(){return null!==this.preferencesPrefix}},methods:{preferencesKey:function(e){return"".concat(this.preferencesPrefix,".").concat(e)},getPreference:function(e){return this.$preferences.get(this.preferencesKey(e))},setPreference:function(e,t){return this.$preferences.set(this.preferencesKey(e),t)},removePreference:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.$preferences.remove(this.preferencesKey(e),t)}}}],props:{breadcrumbs:Array,action:{type:String,required:!0},blueprint:{type:Object,required:!0},initialValues:{type:Object,required:!0},initialMeta:{type:Object,required:!0},title:{type:String,required:!0},method:{type:String,default:"post"},isCreating:{type:Boolean,default:!1},isInline:{type:Boolean,default:!1},publishContainer:{type:String,default:"base"},readOnly:Boolean,createAnotherUrl:String,listingUrl:String},data:function(){return{values:this.initialValues,meta:this.initialMeta,preferencesPrefix:"redirect.redirect",errors:{},saving:!1,containerWidth:null,saveKeyBinding:null,quickSave:!1}},computed:{enableSidebar:function(){return this.blueprint.tabs.map((function(e){return e.handle})).includes("sidebar")},shouldShowSidebar:function(){return this.enableSidebar},afterSaveOption:function(){return this.getPreference("after_save")}},mounted:function(){var e=this;this.saveKeyBinding=this.$keys.bindGlobal(["mod+s","mod+return"],(function(t){t.preventDefault(),e.quickSave=!0,e.save()}))},methods:{save:function(){var e=this;this.saving=!0,this.clearErrors(),this.$axios({method:this.method,url:this.action,data:this.values}).then((function(t){e.saving=!1,e.$refs.container.saved(),e.$emit("saved",t);var r=e.quickSave?"continue_editing":e.afterSaveOption;e.isInline||"create_another"!==r?e.isInline||null!==r?e.isCreating&&"base"===e.publishContainer?e.$nextTick((function(){window.location.href=t.data.redirect})):(e.quickSave=!1,e.$toast.success(__("Saved"))):e.$nextTick((function(){window.location=e.listingUrl})):e.$nextTick((function(){window.location=e.createAnotherUrl}))})).catch((function(t){return e.handleAxiosError(t)}))},clearErrors:function(){this.error=null,this.errors={}},handleAxiosError:function(e){if(this.saving=!1,e.response&&422===e.response.status){var t=e.response.data,r=t.message,i=t.errors;this.error=r,this.errors=i,this.$toast.error(r)}else e.response?this.$toast.error(e.response.data.message):this.$toast.error(e||"Something went wrong")},setFieldValue:function(e,t){this.$refs.container.setFieldValue(e,t)},setFieldMeta:function(e,t){this.$store.dispatch("publish/".concat(this.publishContainer,"/setFieldMeta"),{handle:e,value:t,user:Statamic.user.id})}},destroyed:function(){this.saveKeyBinding.destroy()}},(function(){var e=this,t=e._self._c;return t("div",[e.breadcrumbs?t("breadcrumb",{attrs:{url:e.breadcrumbs[0].url,title:e.breadcrumbs[0].text}}):e._e(),e._v(" "),t("div",{staticClass:"flex items-center mb-6"},[t("h1",{staticClass:"flex-1"},[t("div",{staticClass:"flex items-center"},[t("span",{domProps:{innerHTML:e._s(e.title)}})])]),e._v(" "),e.readOnly?t("div",{staticClass:"pt-px text-2xs text-gray-600 flex mr-4"},[t("svg-icon",{staticClass:"w-4 mr-1 -mt-1",attrs:{name:"light/lock"}}),e._v(" "+e._s(e.__("Read Only"))+"\n    ")],1):e._e(),e._v(" "),e.readOnly?e._e():t("div",{staticClass:"hidden md:flex items-center"},[e.readOnly?e._e():t("save-button-options",{attrs:{"show-options":!e.isInline,"preferences-prefix":e.preferencesPrefix}},[t("button",{staticClass:"btn-primary",attrs:{disabled:e.isSaving},on:{click:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[e._v("\n          "+e._s(e.__("Save"))+"\n        ")])])],1)]),e._v(" "),t("publish-container",{ref:"container",attrs:{name:e.publishContainer,blueprint:e.blueprint,values:e.values,meta:e.meta,errors:e.errors},on:{updated:function(t){e.values=t}}},[t("div",[e._l(e.components,(function(r){return t(r.name,e._g(e._b({key:r.id,tag:"component",attrs:{container:e.container}},"component",r.props,!1),r.events))})),e._v(" "),t("publish-tabs",{attrs:{"read-only":e.readOnly,"enable-sidebar":e.shouldShowSidebar},on:{updated:e.setFieldValue,"meta-updated":e.setFieldMeta,focus:function(t){return e.$refs.container.$emit("focus",t)},blur:function(t){return e.$refs.container.$emit("blur",t)}}})],2)]),e._v(" "),t("div",{staticClass:"md:hidden mt-3 flex items-center"},[e.readOnly?e._e():t("button",{staticClass:"btn-lg btn-primary w-full",attrs:{disabled:e.isSaving},on:{click:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[e._v("\n      "+e._s(e.__("Save"))+"\n    ")])])],1)}),[],!1,null,null,null);const l=c.exports;function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=a({mixins:[{methods:{actionStarted:function(){this.loading=!0},actionCompleted:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!1,!1!==e&&(this.$events.$emit("clear-selections"),this.$events.$emit("reset-action-modals"),!1!==t.message&&this.$toast.success(t.message||__("Action completed")),this.afterActionSuccessfullyCompleted())},afterActionSuccessfullyCompleted:function(){this.request()}}},{data:function(){return{activeFilterBadges:{},activeFilters:{},activePreset:null,activePresetPayload:{},searchQuery:""}},computed:{activeFilterCount:function(){var e=Object.keys(this.activeFilters).length;return this.activeFilters.hasOwnProperty("fields")&&(e=e+Object.keys(this.activeFilters.fields).filter((function(e){return"badge"!=e})).length-1),e},canSave:function(){return this.isDirty&&this.preferencesPrefix},isDirty:function(){return!!this.isFiltering&&(!this.activePreset||(this.activePresetPayload.query!=this.searchQuery||!_.isEqual(this.activePresetPayload.filters||{},this.activeFilters)))},isFiltering:function(){return!_.isEmpty(this.activeFilters)||this.searchQuery||this.activePreset},hasActiveFilters:function(){return this.activeFilterCount>0},searchPlaceholder:function(){return this.activePreset?__("Searching in: ")+this.activePresetPayload.display:__("Search")}},created:function(){var e=this;this.$keys.bind("f",(function(t){t.preventDefault(),e.handleShowFilters()}))},methods:{searchChanged:function(e){this.searchQuery=e},hasFields:function(e){for(var t in e)if(e[t])return!0;return!1},filterChanged:function(e){var t=e.handle,r=e.values,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r&&this.hasFields(r)?Vue.set(this.activeFilters,t,r):Vue.delete(this.activeFilters,t),i&&this.unselectAllItems()},filtersChanged:function(e){for(var t in this.activeFilters={},e){var r=e[t];this.filterChanged({handle:t,values:r},!1)}this.unselectAllItems()},filtersReset:function(){this.activePreset=null,this.activePresetPayload={},this.searchQuery="",this.activeFilters={},this.activeFilterBadges={}},unselectAllItems:function(){this.$refs.dataList&&this.$refs.dataList.clearSelections()},selectPreset:function(e,t){this.activePreset=e,this.activePresetPayload=t,this.searchQuery=t.query,this.filtersChanged(t.filters)},autoApplyFilters:function(e){if(e){var t={};e.filter((function(e){return!_.isEmpty(e.auto_apply)})).forEach((function(e){t[e.handle]=e.auto_apply})),this.activeFilters=t}}}},{props:{initialPerPage:{type:Number,default:function(){return Statamic.$config.get("paginationSize")}}},data:function(){return{perPage:this.initialPerPage,page:1}},mounted:function(){this.setInitialPerPage()},methods:{setInitialPerPage:function(){this.hasPreferences&&(this.perPage=this.getPreference("per_page")||this.initialPerPage)},changePerPage:function(e){var t=this;e=parseInt(e),(this.hasPreferences?this.setPreference("per_page",e!=this.initialPerPage?e:null):Promise.resolve()).then((function(r){t.perPage=e,t.resetPage()}))},selectPage:function(e){this.page=e},resetPage:function(){this.page=1}}},{data:function(){return{preferencesPrefix:null}},computed:{hasPreferences:function(){return null!==this.preferencesPrefix}},methods:{preferencesKey:function(e){return"".concat(this.preferencesPrefix,".").concat(e)},getPreference:function(e){return this.$preferences.get(this.preferencesKey(e))},setPreference:function(e,t){return this.$preferences.set(this.preferencesKey(e),t)},removePreference:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.$preferences.remove(this.preferencesKey(e),t)}}}],props:{initialSortColumn:String,initialSortDirection:String,initialColumns:{type:Array,default:function(){return[]}},filters:Array,actionUrl:String},data:function(){return{source:null,initializing:!0,loading:!0,items:[],columns:this.initialColumns,visibleColumns:this.initialColumns.filter((function(e){return e.visible})),sortColumn:this.initialSortColumn,sortDirection:this.initialSortDirection,meta:null}},computed:{parameters:function(){return Object.assign({sort:this.sortColumn,order:this.sortDirection,page:this.page,perPage:this.perPage,search:this.searchQuery,filters:this.activeFilterParameters,columns:this.visibleColumns.map((function(e){return e.field})).join(",")},this.additionalParameters)},activeFilterParameters:function(){return utf8btoa(JSON.stringify(this.activeFilters))},additionalParameters:function(){return{}},shouldRequestFirstPage:function(){return this.page>1&&0===this.items.length&&(this.page=1,!0)}},created:function(){this.autoApplyFilters(this.filters),this.request()},watch:{parameters:{deep:!0,handler:function(e,t){t.search===e.search&&JSON.stringify(t)!==JSON.stringify(e)&&this.request()}},loading:{immediate:!0,handler:function(e){this.$progress.loading(this.listingKey,e)}},searchQuery:function(e){this.sortColumn=null,this.sortDirection=null,this.resetPage(),this.request()}},methods:{request:function(){var e=this;this.requestUrl?(this.loading=!0,this.source&&this.source.cancel(),this.source=this.$axios.CancelToken.source(),this.$axios.get(this.requestUrl,{params:this.parameters,cancelToken:this.source.token}).then((function(t){if(e.columns=t.data.meta.columns,e.activeFilterBadges=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.data.meta.activeFilterBadges),e.items=Object.values(t.data.data),e.meta=t.data.meta,e.shouldRequestFirstPage)return e.request();e.loading=!1,e.initializing=!1,e.afterRequestCompleted(t)})).catch((function(t){e.$axios.isCancel(t)||(e.loading=!1,e.initializing=!1,e.$toast.error(t.response?t.response.data.message:__("Something went wrong"),{duration:null}))}))):this.loading=!1},afterRequestCompleted:function(e){},sorted:function(e,t){this.sortColumn=e,this.sortDirection=t},removeRow:function(e){var t=e.id,r=_.indexOf(this.rows,_.findWhere(this.rows,{id:t}));this.rows.splice(r,1),0===this.rows.length&&location.reload()}}},undefined,undefined,!1,null,null,null).exports;const h=a({mixins:[f],props:{canCreate:{type:Boolean,required:!0},createUrl:{type:String,required:!0},createLabel:{type:String,required:!0},searchQuery:{type:String,required:!1,default:""}},data:function(){return{listingKey:"redirects",preferencesPrefix:"redirect.redirects",requestUrl:cp_url("redirect/api/redirects"),currentSite:this.site,initialSite:this.site,columns:this.columns}},watch:{activeFilters:{deep:!0,handler:function(e){this.currentSite=e.site?e.site.site:null}},site:function(e){this.currentSite=e},currentSite:function(e){this.setSiteFilter(e),this.$emit("site-changed",e)}},methods:{setSiteFilter:function(e){this.filterChanged({handle:"site",values:{site:e}})},removeRow:function(e){var t=e.id,r=_.indexOf(this.items,_.findWhere(this.items,{id:t}));this.items.splice(r,1),0===this.items.length&&location.reload();var i=this;Object.keys(this.$refs).forEach((function(e){e.includes("deleter_")&&void 0!==i.$refs[e]&&i.$refs[e].cancel()}))},reordered:function(e){var t=this;this.$axios.post(cp_url("redirect/api/redirects/reorder"),{redirects:e}).then((function(){t.$toast.success(__("Redirects re-ordered"))})).catch((function(){t.$toast.error(__("Something went wrong"))}))}}},(function(){var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"mb-6"},[t("div",{staticClass:"flex items-center"},[t("h1",{staticClass:"flex-1"},[e._v("Redirects")]),e._v(" "),this.$scopedSlots.twirldown?t("dropdown-list",{staticClass:"mr-2"},[e._t("twirldown")],2):e._e(),e._v(" "),e.canCreate?t("a",{staticClass:"btn-primary",attrs:{href:e.createUrl},domProps:{textContent:e._s(e.createLabel)}}):e._e()],1)]),e._v(" "),e.initializing?t("div",{staticClass:"card loading"},[t("loading-graphic")],1):e._e(),e._v(" "),e.initializing?e._e():t("data-list",{ref:"datalist",attrs:{rows:e.items,columns:e.columns,sort:!1,"sort-column":e.sortColumn,"sort-direction":e.sortDirection},on:{"visible-columns-updated":function(t){e.visibleColumns=t}},scopedSlots:e._u([{key:"default",fn:function(r){r.hasSelections;return t("div",{},[t("div",{staticClass:"card overflow-hidden p-0 relative"},[t("div",{staticClass:"flex flex-wrap items-center justify-between px-2 pb-2 text-sm border-b"},[t("data-list-filter-presets",{ref:"presets",attrs:{"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"has-active-filters":e.hasActiveFilters,"preferences-prefix":e.preferencesPrefix,"search-query":e.searchQuery},on:{selected:e.selectPreset,reset:e.filtersReset}}),e._v(" "),t("div",{staticClass:"w-full flex-1"},[t("data-list-search",{ref:"search",staticClass:"h-8 mt-2 min-w-[240px] w-full",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),e._v(" "),t("div",{staticClass:"flex space-x-2 mt-2"},[t("button",{staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Reset"))},on:{click:function(t){return e.$refs.presets.refreshPreset()}}}),e._v(" "),t("button",{staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Save"))},on:{click:function(t){return e.$refs.presets.savePreset()}}}),e._v(" "),t("data-list-column-picker",{attrs:{"preferences-key":e.preferencesKey("columns")}})],1)],1),e._v(" "),t("div",[t("data-list-filters",{ref:"filters",attrs:{filters:e.filters,"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"active-filter-badges":e.activeFilterBadges,"active-count":e.activeFilterCount,"search-query":e.searchQuery,"is-searching":!0,"saves-presets":!0,"preferences-prefix":e.preferencesPrefix},on:{changed:e.filterChanged,saved:function(t){return e.$refs.presets.setPreset(t)},deleted:function(t){return e.$refs.presets.refreshPresets()}}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.items.length,expression:"items.length === 0"}],staticClass:"p-3 text-center text-grey-50",domProps:{textContent:e._s(e.__("No results"))}}),e._v(" "),t("data-list-table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],attrs:{loading:e.loading,reorderable:!0,sortable:!1,"toggle-selection-on-row-click":!1,"allow-column-picker":!0,"column-preferences-key":e.preferencesKey("columns")},on:{sorted:e.sorted,reordered:e.reordered},scopedSlots:e._u([{key:"cell-source",fn:function(r){var i=r.row;return[t("a",{staticStyle:{"word-break":"break-all"},attrs:{href:e.cp_url("redirect/redirects/"+i.id)}},[e._v(e._s(i.source))])]}},{key:"cell-match_type",fn:function(r){var i=r.row;return[t("span",{domProps:{textContent:e._s(i.match_type)}})]}},{key:"cell-type",fn:function(r){var i=r.row;return[t("span",{domProps:{textContent:e._s(i.type)}})]}},{key:"cell-enabled",fn:function(r){return[r.row.enabled?t("div",{staticClass:"status-index-field select-none status-published"},[e._v("Enabled")]):t("div",{staticClass:"status-index-field select-none status-draft bg-red-100"},[e._v("Disabled")])]}},{key:"actions",fn:function(r){var i=r.row;r.index;return[t("dropdown-list",[t("dropdown-item",{attrs:{text:e.__("Edit"),redirect:e.cp_url("redirect/redirects/"+i.id)}}),e._v(" "),t("dropdown-item",{staticClass:"warning",attrs:{text:e.__("Delete")},on:{click:function(t){e.$refs["deleter_".concat(i.id)].confirm()}}},[t("resource-deleter",{ref:"deleter_".concat(i.id),attrs:{resource:i,reload:!0},on:{deleted:function(t){return e.removeRow(i.id)}}})],1)],1)]}}],null,!0)})],1),e._v(" "),t("data-list-pagination",{staticClass:"mt-3",attrs:{"resource-meta":e.meta,"per-page":e.perPage},on:{"page-selected":e.selectPage,"per-page-changed":e.changePerPage}})],1)}}],null,!1,2910570162)})],1)}),[],!1,null,null,null).exports;const p=a({mixins:[f,{data:function(){return{deletingRow:!1}},computed:{deletingModalTitle:function(){return this.deletingModalTitleFromRowKey("source")}},methods:{confirmDeleteRow:function(e,t){this.deletingRow={id:e,index:t}},deletingModalTitleFromRowKey:function(e){return __("Delete")+" "+this.items[this.deletingRow.index][e]},deleteRow:function(e,t){var r=this,i=this.deletingRow.id;t=t||__("Deleted"),this.$axios.delete(cp_url("".concat(e,"/").concat(i))).then((function(){var e=_.indexOf(r.items,_.findWhere(r.items,{id:i}));r.items.splice(e,1),r.deletingRow=!1,r.$toast.success(t),location.reload()})).catch((function(e){r.$toast.error(e.response?e.response.data.message:__("Something went wrong"))}))},cancelDeleteRow:function(){this.deletingRow=!1}}}],components:{Listing:f},data:function(){return{listingKey:"errors",preferencesPrefix:"redirect.errors",requestUrl:cp_url("redirect/api/errors"),columns:this.columns}},methods:{relativeDate:function(e){return moment.unix(e).fromNow()}}},(function(){var e=this,t=e._self._c;return t("div",[e.initializing?t("div",{staticClass:"card loading"},[t("loading-graphic")],1):e._e(),e._v(" "),e.initializing?e._e():t("data-list",{ref:"datalist",attrs:{rows:e.items,columns:e.columns,sort:!1,"sort-column":e.sortColumn,"sort-direction":e.sortDirection},on:{"visible-columns-updated":function(t){e.visibleColumns=t}},scopedSlots:e._u([{key:"default",fn:function(r){r.hasSelections;return t("div",{},[t("div",{staticClass:"card overflow-hidden p-0 relative"},[t("div",{staticClass:"flex flex-wrap items-center justify-between px-2 pb-2 text-sm border-b"},[t("data-list-filter-presets",{ref:"presets",attrs:{"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"has-active-filters":e.hasActiveFilters,"preferences-prefix":e.preferencesPrefix,"search-query":e.searchQuery},on:{selected:e.selectPreset,reset:e.filtersReset}}),e._v(" "),t("div",{staticClass:"w-full flex-1"},[t("data-list-search",{ref:"search",staticClass:"h-8 mt-2 min-w-[240px] w-full",attrs:{placeholder:e.searchPlaceholder},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),e._v(" "),t("div",{staticClass:"flex space-x-2 mt-2"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Reset"))},on:{click:function(t){return e.$refs.presets.refreshPreset()}}}),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.isDirty,expression:"isDirty"}],staticClass:"btn btn-sm ml-2",domProps:{textContent:e._s(e.__("Save"))},on:{click:function(t){return e.$refs.presets.savePreset()}}}),e._v(" "),t("data-list-column-picker",{attrs:{"preferences-key":e.preferencesKey("columns")}})],1),e._v(" "),t("a",{staticClass:"ml-2 mt-2 btn btn-sm flex items-center",attrs:{href:e.cp_url("redirect/errors/clear")}},[e._v("Clear all errors")])],1),e._v(" "),t("div",[t("data-list-filters",{ref:"filters",attrs:{filters:e.filters,"active-preset":e.activePreset,"active-preset-payload":e.activePresetPayload,"active-filters":e.activeFilters,"active-filter-badges":e.activeFilterBadges,"active-count":e.activeFilterCount,"search-query":e.searchQuery,"is-searching":!0,"saves-presets":!0,"preferences-prefix":e.preferencesPrefix},on:{changed:e.filterChanged,saved:function(t){return e.$refs.presets.setPreset(t)},deleted:function(t){return e.$refs.presets.refreshPresets()}}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:0===e.items.length,expression:"items.length === 0"}],staticClass:"p-6 text-center text-gray-500",domProps:{textContent:e._s(e.__("No results"))}}),e._v(" "),t("div",{staticClass:"overflow-x-auto overflow-y-hidden"},[t("data-list-table",{directives:[{name:"show",rawName:"v-show",value:e.items.length,expression:"items.length"}],attrs:{"allow-bulk-actions":!1,loading:e.loading,reorderable:!1,sortable:!0,"toggle-selection-on-row-click":!1,"allow-column-picker":!0,"column-preferences-key":e.preferencesKey("columns")},on:{sorted:e.sorted},scopedSlots:e._u([{key:"cell-url",fn:function(r){var i=r.row;return[t("a",{staticClass:"text-blue hover:text-blue-dark",staticStyle:{"word-break":"break-all"},attrs:{href:e.cp_url("redirect/errors/"+i.id)}},[e._v(e._s(i.url))])]}},{key:"cell-lastSeenAt",fn:function(r){var i=r.row;return[t("span",{domProps:{innerHTML:e._s(e.relativeDate(i.lastSeenAt))}})]}},{key:"cell-handled",fn:function(e){var r=e.row;return[t("div",{staticClass:"flex items-center"},[r.handled?t("div",{staticClass:"little-dot mr-2 bg-green-600"}):t("div",{staticClass:"little-dot mr-2 bg-red-500"})])]}},{key:"cell-handledDestination",fn:function(r){var i=r.row;return[t("span",{staticStyle:{"word-break":"break-all"}},[e._v(e._s(i.handledDestination))])]}},{key:"actions",fn:function(r){var i=r.row;r.index;return[i.handled?e._e():t("a",{staticClass:"text-blue flex align-center",attrs:{href:e.cp_url("redirect/redirects/create")+"?source="+encodeURI(i.url)}},[t("svg",{staticClass:"w-4 h-4 mr-2",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"plus",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"}},[t("path",{attrs:{fill:"currentColor",d:"M368 224H224V80c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v144H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h144v144c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V288h144c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}})])])]}}],null,!0)})],1)]),e._v(" "),t("data-list-pagination",{staticClass:"mt-3",attrs:{"resource-meta":e.meta,"per-page":e.perPage},on:{"page-selected":e.selectPage,"per-page-changed":e.changePerPage}})],1)}}],null,!1,75520024)})],1)}),[],!1,null,null,null).exports;Statamic.$components.register("redirect-publish-form",l),Statamic.$components.register("redirect-listing",h),Statamic.$components.register("errors-listing",p)})()})();